# YouTubeチャプター変換ツール

Premiere Pro・DaVinci Resolveで作成したマーカーをYouTubeのチャプター形式に変換するツールです。

## 📖 概要

動画編集ソフトで設定したマーカーを、YouTubeの説明欄に貼り付けられるチャプター形式（タイムスタンプ）に自動変換します。

## ✨ 機能

### 対応形式
- ✅ **DaVinci Resolve EDL** - マーカー付きEDLファイル
- ✅ **Premiere Pro EDL** - マーカー付きEDLファイル
- ✅ **Premiere Pro マーカーテキスト** - .txt形式のマーカー書き出し
- ✅ **Premiere Pro マーカーCSV** - .csv形式のマーカー書き出し

### 主な機能
- 📁 **ファイルアップロード** - ドラッグ&ドロップまたはクリックで選択
- 📋 **テキスト貼り付け** - 直接コピペして変換
- ⏰ **時間補正** - 最初のチャプターを00:00:00に自動調整
- ✏️ **チャプター編集** - 追加・編集・削除が可能
- 🔄 **フォーマット整形** - 重複削除・時間順ソート
- 💾 **ダウンロード** - テキストファイルとして保存
- 📋 **クリップボードコピー** - ワンクリックでコピー
- ⌨️ **キーボードショートカット** - 効率的な操作

## 🎬 Premiere Proでマーカーを書き出す方法

### 方法1: マーカーテキスト（.txt）

1. Premiere Proでシーケンスを開く
2. メニューバー → **ファイル** → **書き出し** → **マーカー...**
3. ダイアログで以下を設定:
   - **形式**: テキスト
   - **範囲**: すべて または カスタム
4. **OK** をクリックして保存

### 方法2: マーカーCSV（.csv）

1. Premiere Proでシーケンスを開く
2. メニューバー → **ファイル** → **書き出し** → **マーカー...**
3. ダイアログで以下を設定:
   - **形式**: CSV
   - **範囲**: すべて または カスタム
4. **OK** をクリックして保存

### 方法3: EDL（.edl）

1. Premiere Proでシーケンスを開く
2. メニューバー → **ファイル** → **書き出し** → **EDL...**
3. マーカーが含まれるEDLとして保存

## 🎨 DaVinci Resolveでマーカーを書き出す方法

1. DaVinci Resolveでタイムラインを開く
2. メニューバー → **File** → **Export** → **Timeline Markers to EDL...**
3. EDLファイルとして保存

## ⌨️ キーボードショートカット

| ショートカット | 機能 |
|----------------|------|
| `Ctrl + S` | チャプターをダウンロード |
| `Ctrl + C` | チャプターをコピー（編集エリア外） |
| `Ctrl + F` | フォーマット整形 |
| `Ctrl + T` | 00:00:00開始に補正 |
| `Alt + A` | 新しいチャプターを追加 |
| `Alt + D` | ダークモード切替 |

## 📂 ファイル構造

```
app/
├── index.html              # メインHTML
├── main.js                 # メインアプリケーション
├── style.css               # スタイルシート
├── utils/                  # ユーティリティモジュール
│   ├── parsers.js         # パーサー関数
│   └── chapter-operations.js # チャプター操作関数
└── ui/                     # UIモジュール
    ├── modal.js           # モーダル管理
    ├── message.js         # メッセージ表示
    └── chapter-list.js    # チャプターリスト表示
```

## 🔧 技術詳細

### パーサー

各ファイル形式に対応したパーサーを実装:

- **DaVinci EDL Parser** - `|M:` マーカー形式を検出
- **Premiere EDL Parser** - `* FROM CLIP NAME:` マーカー形式を検出
- **Premiere TXT Parser** - タブ区切りテキストをパース
- **Premiere CSV Parser** - ヘッダー検出して柔軟にパース

### チャプター操作

- **時間シフト** - ±1時間の調整
- **ソート** - 時間順に並べ替え
- **重複削除** - 同じ時間のチャプターを削除
- **フォーマット** - ソート+重複削除

### データフロー

```
ファイル/テキスト
  ↓
形式検出 (detectFileFormat)
  ↓
パーサー選択 (PARSERS)
  ↓
チャプター抽出
  ↓
ソート (sortChaptersByTime)
  ↓
表示・編集
  ↓
出力 (ダウンロード/コピー)
```

## 🎯 使用例

### 入力例（Premiere Pro マーカーテキスト）

```
Sequence1	00:00:00:00	イントロダクション
Sequence1	00:01:30:15	メインコンテンツ
Sequence1	00:05:45:00	まとめ
```

### 出力例（YouTubeチャプター）

```
00:00:00 イントロダクション
00:01:30 メインコンテンツ
00:05:45 まとめ
```

## 🐛 トラブルシューティング

### ファイルが認識されない

- ファイル形式が対応しているか確認
- ファイルにマーカー情報が含まれているか確認
- テキスト形式の場合、エンコーディングを確認（UTF-8推奨）

### チャプターが正しく抽出されない

- Premiere Proの場合、マーカー書き出し設定を確認
- DaVinci Resolveの場合、マーカーがタイムライン上にあるか確認

## 📝 ライセンス

MIT License - 詳細はルートディレクトリの[LICENSE](../LICENSE)を参照

## 🔗 関連リンク

- [メインプロジェクト](../README.md)
- [リファクタリングドキュメント](../REFACTORING.md)
