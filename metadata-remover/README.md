# 画像メタデータ削除ツール

PNG・JPEG画像からEXIF、XMP、IPTC等のメタデータを完全に削除するツールです。

## 📖 概要

画像ファイルには、撮影日時、GPS位置情報、カメラ設定などの個人情報が含まれている場合があります。このツールを使用すると、画像の見た目や品質を保ったまま、これらのメタデータを完全に削除できます。

## 🔒 プライバシー保護

### 完全クライアントサイド処理

- ✅ **サーバーアップロードなし** - すべての処理はブラウザ内で完結
- ✅ **データ送信なし** - ファイルは外部に送信されません
- ✅ **データ保存なし** - 処理後のファイルは保存されません
- ✅ **完全プライバシー** - あなたのデバイスから画像が外に出ることはありません

## ✨ 機能

### 削除されるメタデータ

- 📍 **GPS位置情報** - 撮影場所の緯度・経度
- 📅 **撮影日時** - いつ撮影されたか
- 📷 **カメラ設定（EXIF）** - カメラ機種、絞り、ISO、シャッター速度など
- ✏️ **編集履歴（XMP）** - Photoshopなどの編集履歴、著作権情報
- 📝 **キャプション（IPTC）** - 作者、説明文、キーワード
- 🎨 **カラープロファイル（ICC）** - 色空間情報

### 対応形式

- ✅ **PNG** - Portable Network Graphics
- ✅ **JPEG/JPG** - Joint Photographic Experts Group

### 主な機能

- 📁 **ドラッグ&ドロップ** - 簡単にファイルをアップロード
- 👁️ **プレビュー** - 処理前に画像を確認
- ⚡ **高速処理** - ブラウザ内で即座に処理
- 💾 **ワンクリックダウンロード** - 処理と同時にダウンロード
- 🌙 **ダークモード対応** - 目に優しい表示

## 🛠️ 処理方法

### PNG画像

PNG画像は「チャンク」と呼ばれるデータブロックで構成されています。

**保持されるチャンク（必須）:**
- `IHDR` - 画像ヘッダー（サイズ、色深度など）
- `PLTE` - パレット（インデックスカラーの場合）
- `IDAT` - 実際の画像データ
- `IEND` - ファイル終端

**削除されるチャンク（メタデータ）:**
- `tEXt`, `zTXt`, `iTXt` - テキスト情報
- `tIME` - 最終更新時刻
- `pHYs` - 物理的なピクセル寸法
- `iCCP` - ICCカラープロファイル
- その他すべての補助チャンク

### JPEG画像

JPEG画像は「セグメント」と呼ばれるマーカーで区切られたデータで構成されています。

**保持されるセグメント（画像データ）:**
- `SOI` (0xFFD8) - 画像開始
- `SOF` (0xFFC0-0xFFCF) - フレーム開始
- `SOS` (0xFFDA) - スキャン開始
- `DQT` (0xFFDB) - 量子化テーブル
- `DHT` (0xFFC4) - ハフマンテーブル
- `EOI` (0xFFD9) - 画像終了

**削除されるセグメント（メタデータ）:**
- `APP0` (0xFFE0) - JFIF情報
- `APP1` (0xFFE1) - EXIF、XMP情報
- `APP2` (0xFFE2) - ICCプロファイル
- `APP3-APP15` (0xFFE3-0xFFEF) - その他のアプリケーションデータ
- `COM` (0xFFFE) - コメント

## 📂 ファイル構造

```
metadata-remover/
├── index.html              # メインHTML
├── client-processor.js     # クライアント処理ロジック
└── style.css               # スタイルシート
```

## 🔧 技術詳細

### PNG処理アルゴリズム

```javascript
1. PNG署名検証（137, 80, 78, 71, 13, 10, 26, 10）
2. 署名をコピー
3. 各チャンクを読み取り
   - チャンク長（4バイト）
   - チャンクタイプ（4バイト）
   - チャンクデータ（長さ分）
   - CRC（4バイト）
4. 必須チャンクのみコピー（IHDR, PLTE, IDAT, IEND）
5. 新しいバイナリを生成
```

### JPEG処理アルゴリズム

```javascript
1. JPEG署名検証（0xFF, 0xD8）
2. SOI（Start of Image）をコピー
3. 各セグメントを読み取り
   - マーカー（0xFF + タイプ）
   - セグメント長（2バイト）
   - セグメントデータ
4. メタデータセグメント（APP0-APP15, COM）を除外
5. 画像データセグメントのみコピー
6. EOI（End of Image）まで処理
```

## 🎯 使用例

### 処理前のメタデータ例

```
EXIF情報:
- カメラ: iPhone 13 Pro
- 撮影日時: 2025/10/03 14:30:00
- GPS位置: 35.6812° N, 139.7671° E (東京)
- 絞り: f/1.6
- ISO: 400
- 焦点距離: 26mm
```

### 処理後

```
メタデータ: なし
画像データ: そのまま保持
画質: 変化なし
```

## ⚠️ 注意事項

### ICCプロファイルの削除

ICCカラープロファイルも削除されるため、表示される色が僅かに変わる可能性があります。

- **影響**: ほとんどの場合、視覚的な違いは感じられません
- **理由**: 多くのブラウザ・アプリはデフォルトのsRGBプロファイルを使用
- **対処**: 色精度が重要な場合は、ICCプロファイルを保持する別のツールを使用

### ファイルサイズ

メタデータを削除することで、通常ファイルサイズが小さくなります。

- **PNG**: 補助チャンクが多い場合、大幅に削減
- **JPEG**: EXIFデータが大きい場合、数KB〜数十KB削減

### 画質

- ✅ **画質は変わりません** - 画像データはそのまま保持
- ✅ **再エンコードなし** - 品質劣化なし
- ✅ **ピクセルデータ保持** - 見た目は完全に同じ

## 🐛 トラブルシューティング

### 処理できない

- PNG/JPEG形式のファイルか確認
- ファイルが破損していないか確認
- 別のブラウザで試す

### ダウンロードされない

- ブラウザのポップアップブロッカーを確認
- ダウンロード設定を確認

## 🔬 技術仕様

### サポートブラウザ

- ✅ Chrome 61+
- ✅ Firefox 60+
- ✅ Safari 11+
- ✅ Edge 16+

（ES6 Modules、FileReader API、Blob APIが必要）

### パフォーマンス

- **小さいファイル（<1MB）**: 即座（<100ms）
- **中程度（1-5MB）**: 高速（100-500ms）
- **大きいファイル（5-20MB）**: 数秒

### メモリ使用量

処理中、ファイルサイズの約2-3倍のメモリを使用します。

## 📝 ライセンス

MIT License - 詳細はルートディレクトリの[LICENSE](../LICENSE)を参照

## 🔗 関連リンク

- [メインプロジェクト](../README.md)
- [YouTubeチャプター変換ツール](../app/README.md)

## 🛡️ セキュリティ

このツールは完全にクライアントサイドで動作し、ファイルをサーバーにアップロードしません。すべての処理はあなたのブラウザ内で完結します。

**データフロー:**
```
あなたのデバイス
  ↓
ブラウザで処理（サーバー送信なし）
  ↓
ダウンロード
```

プライバシーを重視する方にも安心してご利用いただけます。
